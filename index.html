<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>PushTime - Schedule Push Notifications</title>

    <!-- PWA Settings -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#0f172a">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3602/3602145.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Vue 3 from CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Flatpickr CSS (Dark Theme) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/dark.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        slate: { 850: '#151e2e' }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #0f172a;
            overflow-x: hidden;
        }

        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .gradient-text {
            background: linear-gradient(to right, #818cf8, #c084fc);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .glow-bg {
            position: absolute;
            width: 100vw;
            max-width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.15) 0%, rgba(15, 23, 42, 0) 70%);
            top: -20%;
            left: 50%;
            transform: translateX(-50%);
            z-index: -1;
            pointer-events: none;
        }

        .logs::-webkit-scrollbar {
            width: 6px;
        }

        .logs::-webkit-scrollbar-track {
            background: transparent;
        }

        .logs::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 3px;
        }

        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .flatpickr-calendar.dark {
            background: #1e293b;
            border: 1px solid #334155;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
        }

        .flatpickr-day.selected {
            background: #6366f1;
            border-color: #6366f1;
        }

        @media all and (display-mode: standalone) {
            .marketing-content {
                display: none !important;
            }

            .pwa-container {
                min-height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                padding-top: env(safe-area-inset-top);
                padding-bottom: env(safe-area-inset-bottom);
            }

            .glass-panel {
                border: none;
                background: transparent;
                box-shadow: none;
            }
        }
    </style>
</head>

<body class="bg-slate-900 text-slate-200 antialiased selection:bg-indigo-500 selection:text-white">
    <div class="glow-bg"></div>

    <div id="app">
        <!-- Landing Page -->
        <div v-if="currentPath === '#/' || currentPath === '/'">
            <!-- Navigation -->
            <nav
                class="marketing-content w-full border-b border-slate-800 bg-slate-900/50 backdrop-blur-md fixed top-0 z-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex items-center justify-between h-16">
                        <div class="flex items-center gap-2">
                            <div
                                class="w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center text-white font-bold">
                                P</div>
                            <span class="font-bold text-xl tracking-tight">PushTime<span
                                    class="text-indigo-400">.io</span></span>
                        </div>
                        <div class="flex items-center gap-4">
                            <div class="hidden md:flex items-baseline space-x-8">
                                <a href="#features"
                                    class="hover:text-white transition-colors text-sm font-medium text-slate-400">Features</a>
                                <a href="#how-it-works"
                                    class="hover:text-white transition-colors text-sm font-medium text-slate-400">How it
                                    Works</a>
                                <a href="#pricing"
                                    class="hover:text-white transition-colors text-sm font-medium text-slate-400">Pricing</a>
                            </div>
                            <a v-if="user" href="#/dashboard"
                                class="bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all">Go
                                to Dashboard</a>
                            <a v-else :href="loginUrl"
                                class="hidden md:inline-block bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all">Get
                                Free API Key</a>

                            <button v-if="showInstallButton" @click="installPWA"
                                class="bg-slate-700 hover:bg-slate-600 text-white px-3 py-1.5 rounded-lg text-xs font-bold transition-all border border-slate-600 flex items-center gap-2">
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                                </svg>
                                Install App
                            </button>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- Main Container -->
            <main class="pwa-container pt-24 pb-16 sm:pt-28 sm:pb-24 lg:pb-32 overflow-hidden">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative w-full">
                    <div class="lg:grid lg:grid-cols-12 lg:gap-16 items-center">
                        <!-- Left Column: Copy -->
                        <div class="marketing-content lg:col-span-6 text-center lg:text-left mb-16 lg:mb-0">
                            <div
                                class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-300 text-xs font-semibold uppercase tracking-wider mb-6">
                                <span class="w-2 h-2 rounded-full bg-indigo-400 animate-pulse"></span>
                                Serverless Ready
                            </div>
                            <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight text-white mb-6">
                                Schedule Push Notifications <br class="hidden lg:block">
                                <span class="gradient-text">Without a Backend</span>
                            </h1>
                            <p class="mt-4 text-lg text-slate-400 max-w-2xl mx-auto lg:mx-0">
                                Don't spin up a VPS just to run a cron job. Use our <strong class="text-white">free
                                    API</strong> to schedule web push notifications from your static site, PWA, or
                                serverless function.
                            </p>
                            <div class="mt-8 flex justify-center lg:justify-start gap-4">
                                <a href="#how-it-works"
                                    class="px-8 py-3 bg-white text-slate-900 rounded-lg font-bold hover:bg-slate-200 transition-colors">Start
                                    Building</a>
                                <a href="/docs"
                                    class="px-8 py-3 bg-slate-800 text-white border border-slate-700 rounded-lg font-bold hover:bg-slate-700 transition-colors">Read
                                    Docs</a>
                            </div>

                            <div
                                class="mt-10 flex items-center justify-center lg:justify-start gap-6 text-slate-500 text-sm">
                                <div class="flex items-center gap-2">
                                    <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg>
                                    <span>Free Tier</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg>
                                    <span>No Credit Card</span>
                                </div>
                            </div>
                        </div>

                        <!-- Right Column: The Tester -->
                        <div class="lg:col-span-6 relative w-full max-w-md mx-auto lg:max-w-none">
                            <div
                                class="marketing-content absolute -inset-1 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl blur opacity-30">
                            </div>

                            <div class="relative glass-panel rounded-xl p-1 shadow-2xl">
                                <div class="bg-slate-900 rounded-lg overflow-hidden border border-slate-800">
                                    <div
                                        class="bg-slate-800/50 p-4 border-b border-slate-700 flex justify-between items-center">
                                        <div class="flex items-center gap-2">
                                            <div class="w-3 h-3 rounded-full bg-red-500"></div>
                                            <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                                            <div class="w-3 h-3 rounded-full bg-green-500"></div>
                                        </div>
                                        <div class="text-xs font-mono text-slate-500">Live Demo</div>
                                    </div>

                                    <div class="p-6 space-y-6">
                                        <div v-if="showPlaygroundWarning"
                                            class="bg-orange-500/10 border border-orange-500/20 rounded-lg p-3 text-xs text-orange-200">
                                            <strong>Dev Mode:</strong> Service Workers behave strictly.
                                        </div>

                                        <div class="flex items-center justify-between">
                                            <span
                                                class="text-xs font-bold text-slate-500 uppercase tracking-wider">Status</span>
                                            <span :class="permissionStatusClass" v-text="permissionStatusText"></span>
                                        </div>

                                        <div class="space-y-4">
                                            <div>
                                                <label
                                                    class="block text-xs font-semibold text-slate-400 mb-1.5">Notification
                                                    Message</label>
                                                <input type="text" v-model="message"
                                                    class="w-full bg-slate-800 border border-slate-700 rounded-md px-3 py-3 text-base sm:text-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all text-white placeholder-slate-600">
                                            </div>

                                            <div
                                                class="bg-slate-800/30 p-4 rounded-lg border border-slate-700/50 space-y-4">
                                                <div class="flex items-center justify-between">
                                                    <label class="text-xs font-semibold text-indigo-400">Schedule
                                                        Delivery</label>
                                                    <button @click="clearSchedule"
                                                        class="text-[10px] text-slate-500 hover:text-white transition-colors">RESET</button>
                                                </div>

                                                <div class="relative group">
                                                    <div
                                                        class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                                        <svg class="h-4 w-4 text-slate-500 group-focus-within:text-indigo-400 transition-colors"
                                                            fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                stroke-width="2"
                                                                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                        </svg>
                                                    </div>
                                                    <input type="number" v-model="delayMinutes"
                                                        placeholder="Send in N minutes (e.g. 1)"
                                                        class="pl-9 w-full bg-slate-900 border border-slate-700 rounded-md px-3 py-3 text-base sm:text-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all text-white placeholder-slate-600">
                                                </div>

                                                <div class="relative flex items-center py-1">
                                                    <div class="flex-grow border-t border-slate-700"></div>
                                                    <span
                                                        class="flex-shrink-0 mx-2 text-[10px] text-slate-600 font-bold uppercase">OR
                                                        DATE</span>
                                                    <div class="flex-grow border-t border-slate-700"></div>
                                                </div>

                                                <div class="relative group">
                                                    <input type="text" id="scheduleTime"
                                                        placeholder="Pick a specific date..."
                                                        class="w-full bg-slate-900 border border-slate-700 rounded-md px-3 py-3 text-base sm:text-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all text-white placeholder-slate-600 cursor-pointer">
                                                    <div
                                                        class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                                        <svg class="h-4 w-4 text-slate-500" fill="none"
                                                            viewBox="0 0 24 24" stroke="currentColor">
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                stroke-width="2"
                                                                d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                                        </svg>
                                                    </div>
                                                </div>
                                            </div>

                                            <button @click="scheduleNotification" :disabled="isProcessing"
                                                class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 px-4 rounded-lg transition-all shadow-lg shadow-indigo-500/20 flex items-center justify-center gap-2 group transform active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed">
                                                <svg v-if="isProcessing" class="animate-spin h-4 w-4 text-white"
                                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                                    <circle class="opacity-25" cx="12" cy="12" r="10"
                                                        stroke="currentColor" stroke-width="4"></circle>
                                                    <path class="opacity-75" fill="currentColor"
                                                        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                                    </path>
                                                </svg>
                                                <span v-else
                                                    class="group-hover:translate-x-1 transition-transform">Schedule
                                                    Notification</span>
                                                <svg v-if="!isProcessing" class="w-4 h-4" fill="none"
                                                    viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                                                </svg>
                                            </button>
                                        </div>

                                        <div class="pt-2">
                                            <div class="flex justify-between items-end mb-1">
                                                <label
                                                    class="text-[10px] uppercase text-slate-500 font-bold tracking-wider">Live
                                                    Logs</label>
                                                <button @click="clearLogs"
                                                    class="text-[10px] text-indigo-400 hover:text-indigo-300">Clear</button>
                                            </div>
                                            <div
                                                class="logs bg-black/40 rounded border border-slate-800 p-2 h-24 overflow-y-auto font-mono text-[10px] leading-relaxed">
                                                <div v-if="logs.length === 0" class="text-slate-600 italic">Waiting for
                                                    input...</div>
                                                <div v-for="(log, index) in logs" :key="index" :class="log.class"
                                                    class="mb-1">
                                                    <span class="opacity-30 mr-2">{{ log.time }}</span>{{ log.message }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Features Section -->
            <section id="features" class="marketing-content py-20 bg-slate-900 border-t border-slate-800">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-16">
                        <h2 class="text-3xl font-bold text-white">Why use PushTime?</h2>
                        <p class="mt-4 text-slate-400">Everything you need to manage time-sensitive notifications.</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div
                            class="p-6 bg-slate-800/50 rounded-xl border border-slate-700/50 hover:border-indigo-500/50 transition-colors">
                            <div
                                class="w-12 h-12 bg-indigo-500/10 rounded-lg flex items-center justify-center text-indigo-400 mb-4">
                                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold text-white mb-2">Precision Scheduling</h3>
                            <p class="text-slate-400 text-sm">Schedule notifications down to the minute. We handle the
                                queues, cron jobs, and retries so you don't have to.</p>
                        </div>

                        <div
                            class="p-6 bg-slate-800/50 rounded-xl border border-slate-700/50 hover:border-indigo-500/50 transition-colors">
                            <div
                                class="w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center text-purple-400 mb-4">
                                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M13 10V3L4 14h7v7l9-11h-7z" />
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold text-white mb-2">Serverless Friendly</h3>
                            <p class="text-slate-400 text-sm">Perfect for JAMstack sites and Cloud Functions. Just fire
                                an API call with the date, and we'll wake up to send it.</p>
                        </div>

                        <div
                            class="p-6 bg-slate-800/50 rounded-xl border border-slate-700/50 hover:border-indigo-500/50 transition-colors">
                            <div
                                class="w-12 h-12 bg-pink-500/10 rounded-lg flex items-center justify-center text-pink-400 mb-4">
                                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold text-white mb-2">Secure & Private</h3>
                            <p class="text-slate-400 text-sm">We only store the subscription endpoint until delivery.
                                Your VAPID keys remain yours. End-to-end encrypted payloads supported.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- How It Works Section -->
            <section id="how-it-works"
                class="marketing-content py-20 border-t border-slate-800 relative overflow-hidden">
                <div class="absolute inset-0 bg-slate-900"></div>
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                    <div class="lg:grid lg:grid-cols-2 lg:gap-16 items-center">
                        <div>
                            <h2 class="text-3xl font-bold text-white mb-6">It's just one API call.</h2>
                            <p class="text-slate-400 mb-8">
                                Integrate in minutes. Get the push subscription from your user's browser, then send it
                                to our API with a
                                <code class="bg-slate-800 px-2 py-1 rounded text-indigo-400">scheduled_time</code>
                                parameter.
                            </p>

                            <div class="space-y-4 mb-6">
                                <div class="flex gap-4">
                                    <div
                                        class="flex-shrink-0 w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center font-bold text-slate-500">
                                        1</div>
                                    <div>
                                        <h4 class="text-white font-bold">Get API Key</h4>
                                        <p class="text-sm text-slate-500">Sign in and copy your API key from dashboard
                                        </p>
                                    </div>
                                </div>
                                <div class="flex gap-4">
                                    <div
                                        class="flex-shrink-0 w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center font-bold text-slate-500">
                                        2</div>
                                    <div>
                                        <h4 class="text-white font-bold">Subscribe User</h4>
                                        <p class="text-sm text-slate-500">Use browser's PushManager API to get
                                            subscription</p>
                                    </div>
                                </div>
                                <div class="flex gap-4">
                                    <div
                                        class="flex-shrink-0 w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center font-bold text-white">
                                        3</div>
                                    <div>
                                        <h4 class="text-white font-bold">Schedule It</h4>
                                        <p class="text-sm text-slate-500">POST to /api/send with subscription + message
                                            + time</p>
                                    </div>
                                </div>
                            </div>

                            <a href="docs.html"
                                class="inline-flex items-center gap-2 text-indigo-400 hover:text-indigo-300 text-sm font-medium">
                                View Full Integration Guide
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 5l7 7-7 7"></path>
                                </svg>
                            </a>
                        </div>

                        <div class="mt-10 lg:mt-0">
                            <div
                                class="bg-[#1e1e1e] rounded-xl shadow-2xl overflow-hidden border border-slate-700 font-mono text-sm">
                                <div class="flex items-center gap-2 px-4 py-3 bg-[#252526] border-b border-[#333]">
                                    <div class="w-3 h-3 rounded-full bg-red-500"></div>
                                    <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                                    <div class="w-3 h-3 rounded-full bg-green-500"></div>
                                    <span class="ml-2 text-slate-500">schedule.js</span>
                                </div>
                                <div class="p-4 overflow-x-auto">
                                    <pre class="text-slate-300"><span class="text-purple-400">// Get push subscription from browser</span>
<span class="text-blue-300">const</span> registration <span class="text-pink-400">=</span> <span class="text-pink-400">await</span> navigator.serviceWorker.register(<span class="text-orange-300">'/sw.js'</span>);
<span class="text-blue-300">const</span> subscription <span class="text-pink-400">=</span> <span class="text-pink-400">await</span> registration.pushManager.subscribe({
  userVisibleOnly: <span class="text-blue-400">true</span>,
  applicationServerKey: VAPID_PUBLIC_KEY
});

<span class="text-purple-400">// Schedule notification via PushTime API</span>
<span class="text-blue-300">const</span> response <span class="text-pink-400">=</span> <span class="text-pink-400">await</span> fetch(<span class="text-orange-300">'{{ BACKEND_URL }}/api/send'</span>, {
  method: <span class="text-orange-300">'POST'</span>,
  headers: { <span class="text-orange-300">'Content-Type'</span>: <span class="text-orange-300">'application/json'</span> },
  credentials: <span class="text-orange-300">'include'</span>,
  body: JSON.stringify({
    sub: subscription,
    message: <span class="text-orange-300">'Your meeting starts in 5 minutes!'</span>,
    scheduled_time: <span class="text-orange-300">'2025-11-30T14:30:00.000Z'</span>
  })
});</pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Pricing Section -->
            <section id="pricing" class="marketing-content py-20 border-t border-slate-800">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-16">
                        <h2 class="text-3xl sm:text-4xl font-bold text-white mb-4">Simple, Transparent Pricing</h2>
                        <p class="text-slate-400 text-lg max-w-2xl mx-auto">No hidden fees. No credit card required.
                            Just get your API key and start building.</p>
                    </div>

                    <div class="max-w-lg mx-auto">
                        <div
                            class="glass-panel rounded-2xl p-8 shadow-2xl border-2 border-indigo-500/50 relative overflow-hidden">
                            <div
                                class="absolute top-0 right-0 bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-xs font-bold px-4 py-1 rounded-bl-lg">
                                MOST POPULAR
                            </div>

                            <div class="text-center mb-8 mt-4">
                                <h3 class="text-2xl font-bold text-white mb-2">Free Forever</h3>
                                <div class="flex items-baseline justify-center gap-2 mb-4">
                                    <span class="text-5xl font-extrabold text-white">$0</span>
                                    <span class="text-slate-400">/month</span>
                                </div>
                                <p class="text-slate-400">Everything you need to get started</p>
                            </div>

                            <ul class="space-y-4 mb-8">
                                <li class="flex items-start gap-3">
                                    <svg class="w-6 h-6 text-green-400 flex-shrink-0" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg>
                                    <span class="text-slate-300"><strong class="text-white">Unlimited</strong> scheduled
                                        notifications</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <svg class="w-6 h-6 text-green-400 flex-shrink-0" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg>
                                    <span class="text-slate-300"><strong class="text-white">Instant</strong> and
                                        scheduled delivery</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <svg class="w-6 h-6 text-green-400 flex-shrink-0" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg>
                                    <span class="text-slate-300"><strong class="text-white">Simple</strong> REST
                                        API</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <svg class="w-6 h-6 text-green-400 flex-shrink-0" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg>
                                    <span class="text-slate-300"><strong class="text-white">No credit card</strong>
                                        required</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <svg class="w-6 h-6 text-green-400 flex-shrink-0" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg>
                                    <span class="text-slate-300"><strong class="text-white">No setup fees</strong> or
                                        commitments</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <svg class="w-6 h-6 text-green-400 flex-shrink-0" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg>
                                    <span class="text-slate-300"><strong class="text-white">Full documentation</strong>
                                        and examples</span>
                                </li>
                            </ul>

                            <a v-if="user" href="#/dashboard"
                                class="block w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white text-center font-bold py-4 px-6 rounded-lg transition-all transform hover:scale-105">
                                Go to Dashboard
                            </a>
                            <a v-else :href="loginUrl"
                                class="block w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white text-center font-bold py-4 px-6 rounded-lg transition-all transform hover:scale-105">
                                Get Your Free API Key
                            </a>

                            <p class="text-center text-slate-500 text-sm mt-6">
                                <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z">
                                    </path>
                                </svg>
                                Sign in with Google â€¢ Takes 30 seconds
                            </p>
                        </div>
                    </div>

                    <div class="mt-16 text-center">
                        <p class="text-slate-400 mb-4">Have questions about pricing or features?</p>
                        <a href="/docs"
                            class="inline-flex items-center gap-2 text-indigo-400 hover:text-indigo-300 font-medium">
                            Read the Documentation
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7">
                                </path>
                            </svg>
                        </a>
                    </div>
                </div>
            </section>

            <!-- Footer -->
            <footer class="marketing-content bg-slate-950 py-12 border-t border-slate-900">
                <div class="max-w-7xl mx-auto px-4 text-center">
                    <p class="text-slate-500 text-sm">Â© 2025 PushTime.io. All rights reserved.</p>
                </div>
            </footer>
        </div>

        <!-- Dashboard Page -->
        <div v-if="currentPath === '#/dashboard' && user" class="marketing-content pwa-container pt-20 pb-16">
            <div class="max-w-xl w-full mx-auto px-4">
                <div class="glass-panel rounded-xl p-8 shadow-2xl bg-slate-800/80 border border-slate-700">
                    <div class="flex justify-between items-center mb-6">
                        <h1 class="text-3xl font-bold text-white">Welcome, {{ user.name.split(' ')[0] }}!</h1>
                        <button @click="logout"
                            class="text-xs bg-slate-700 hover:bg-slate-600 text-white px-3 py-1.5 rounded-lg font-medium transition-all">Logout</button>
                    </div>

                    <h2 class="text-xl font-semibold text-indigo-400 mb-4">Your Permanent API Key</h2>
                    <p class="text-slate-400 mb-3">Use this key to authorize your PushTime scheduling requests from your
                        client applications, PWAs, or serverless functions.</p>

                    <div
                        class="api-key-box flex justify-between items-center p-4 bg-slate-900 border border-indigo-500/50 rounded-lg text-white font-mono text-base overflow-hidden">
                        <code class="text-indigo-300 break-all mr-4">{{ user.api_key }}</code>
                        <button @click="copyApiKey"
                            class="flex-shrink-0 text-indigo-400 hover:text-white transition-colors relative">
                            <svg v-if="!showCopied" class="w-5 h-5" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M8 5H6a2 2 0 00-2 2v10a2 2 0 002 2h2m-2-4l4-4m-4 4l4 4m0 0l-4-4"></path>
                            </svg>
                            <span v-if="showCopied" class="text-xs text-green-400">Copied!</span>
                        </button>
                    </div>

                    <h3 class="text-lg font-semibold text-slate-300 mt-8 mb-3">API Endpoints</h3>

                    <div class="space-y-4">
                        <div>
                            <p class="text-slate-400 text-sm mb-2">Schedule or send notifications:</p>
                            <code
                                class="block p-3 bg-black/50 border border-slate-700 rounded text-green-400 font-mono text-xs overflow-x-auto break-all">
POST {{ BACKEND_URL }}/api/send
                            </code>
                        </div>

                        <div>
                            <p class="text-slate-400 text-sm mb-2">Check pending notifications:</p>
                            <code
                                class="block p-3 bg-black/50 border border-slate-700 rounded text-green-400 font-mono text-xs overflow-x-auto break-all">
GET {{ BACKEND_URL }}/api/pending
                            </code>
                        </div>
                    </div>

                    <div class="mt-6 flex justify-between items-center">
                        <a href="/docs"
                            class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg text-sm transition-all">See
                            Docs</a>
                        <a href="/" class="text-sm text-slate-400 hover:text-white underline transition-colors">Back to
                            Tester</a>
                    </div>
                </div>

                <!-- Scheduled Notifications -->
                <div class="glass-panel rounded-xl p-8 shadow-2xl bg-slate-800/80 border border-slate-700 mt-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-semibold text-white">Your Scheduled Notifications</h2>
                        <button @click="loadNotifications" class="text-sm text-indigo-400 hover:text-indigo-300">
                            <svg class="w-4 h-4 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                                </path>
                            </svg>
                            Refresh
                        </button>
                    </div>

                    <div v-if="loadingNotifications" class="text-slate-500 text-sm">Loading...</div>

                    <div v-else-if="notifications.length === 0" class="text-center py-8">
                        <svg class="w-12 h-12 mx-auto text-slate-600 mb-3" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9">
                            </path>
                        </svg>
                        <p class="text-slate-500">No scheduled notifications</p>
                        <p class="text-slate-600 text-sm mt-1">Schedule a notification from the <a href="#/"
                                class="text-indigo-400 hover:text-indigo-300 underline">tester page</a></p>
                    </div>

                    <div v-else class="space-y-3">
                        <div v-for="n in notifications" :key="n.id"
                            class="bg-slate-900/50 border border-slate-700 rounded-lg p-4">
                            <div class="flex justify-between items-start">
                                <div class="flex-1">
                                    <p class="text-white font-medium mb-1">{{ n.message }}</p>
                                    <p class="text-slate-400 text-sm">
                                        <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        {{ formatDate(n.send_at) }} <span class="text-indigo-400">({{
                                            timeUntil(n.send_at) }})</span>
                                    </p>
                                    <p class="text-slate-500 text-xs mt-1">
                                        Created {{ formatDate(n.created_at) }}
                                    </p>
                                </div>
                                <span class="text-xs bg-indigo-600/20 text-indigo-400 px-2 py-1 rounded">Pending</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Redirect to login if accessing dashboard without auth -->
        <div v-if="currentPath === '#/dashboard' && !user && !checkingSession"
            class="min-h-screen flex items-center justify-center">
            <div class="text-center">
                <p class="text-slate-400 mb-4">Please log in to access the dashboard</p>
                <a :href="loginUrl"
                    class="bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-3 rounded-lg font-bold transition-all">
                    Sign in with Google
                </a>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, onMounted, computed, watch, nextTick } = Vue;

        createApp({
            setup() {
                // Config
                const BACKEND_URL = window.location.hostname === 'localhost'
                    ? 'http://localhost:9292'
                    : 'https://your-vps-domain.com';  // UPDATE FOR PRODUCTION

                const VAPID_PUBLIC_KEY = 'BICNyZg28DzeGJ5NXZA2GKkspxj-ZGEXq6hBzPcjZBeT1xTNb8GR-Yz4jwPOfeYRYKE-CSK6Ds191QFrF4cqxDY';

                // State
                const user = ref(null);
                const checkingSession = ref(true);
                const currentPath = ref(window.location.hash || '#/');
                const loginUrl = `${BACKEND_URL}/auth/google_oauth2`;

                // Tester state
                const message = ref('Hello from the future! ðŸš€');
                const delayMinutes = ref('');
                const logs = ref([]);
                const isProcessing = ref(false);
                const permissionStatus = ref('default');
                const showPlaygroundWarning = ref(false);
                const showInstallButton = ref(false);
                const deferredPrompt = ref(null);

                // Dashboard state
                const notifications = ref([]);
                const loadingNotifications = ref(false);
                const showCopied = ref(false);

                // Flatpickr instance
                let flatpickrInstance = null;

                // Hash router
                window.addEventListener('hashchange', () => {
                    currentPath.value = window.location.hash || '#/';
                });

                // PWA install prompt
                window.addEventListener('beforeinstallprompt', (e) => {
                    e.preventDefault();
                    deferredPrompt.value = e;
                    showInstallButton.value = true;
                });

                const installPWA = async () => {
                    if (deferredPrompt.value) {
                        deferredPrompt.value.prompt();
                        const choiceResult = await deferredPrompt.value.userChoice;
                        if (choiceResult.outcome === 'accepted') {
                            log('User accepted the PWA install', 'success');
                        } else {
                            log('User dismissed the PWA install', 'warn');
                        }
                        deferredPrompt.value = null;
                        showInstallButton.value = false;
                    }
                };

                // Check session on mount
                const checkSession = async () => {
                    try {
                        const res = await fetch(`${BACKEND_URL}/me`, {
                            credentials: 'include'  // CRITICAL: Send cookies
                        });
                        if (res.ok) {
                            user.value = await res.json();
                        }
                    } catch (e) {
                        console.error('Session check failed:', e);
                    } finally {
                        checkingSession.value = false;
                    }
                };

                // Logout
                const logout = async () => {
                    await fetch(`${BACKEND_URL}/auth/logout`, {
                        credentials: 'include'
                    });
                    user.value = null;
                    window.location.hash = '/';
                };

                // Logging
                const log = (msg, type = 'info') => {
                    const colors = {
                        info: 'text-slate-400',
                        success: 'text-green-400',
                        error: 'text-red-400',
                        warn: 'text-yellow-400'
                    };
                    const time = new Date().toLocaleTimeString([], { hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit' });
                    logs.value.push({
                        time,
                        message: msg,
                        class: colors[type]
                    });
                    // Auto-scroll logs
                    nextTick(() => {
                        const logsDiv = document.querySelector('.logs');
                        if (logsDiv) logsDiv.scrollTop = logsDiv.scrollHeight;
                    });
                };

                const clearLogs = () => {
                    logs.value = [];
                };

                const clearSchedule = () => {
                    if (flatpickrInstance) flatpickrInstance.clear();
                    delayMinutes.value = '';
                    log('Schedule cleared (Sending Immediately)', 'info');
                };

                // Update permission status
                const updatePermissionStatus = () => {
                    if ('Notification' in window) {
                        permissionStatus.value = Notification.permission;
                    }
                };

                const permissionStatusText = computed(() => {
                    return permissionStatus.value.toUpperCase();
                });

                const permissionStatusClass = computed(() => {
                    const styles = {
                        granted: 'bg-green-500/10 text-green-400 border-green-500/20',
                        denied: 'bg-red-500/10 text-red-400 border-red-500/20',
                        default: 'bg-yellow-500/10 text-yellow-400 border-yellow-500/20'
                    };
                    return `px-2 py-0.5 rounded text-[10px] font-bold border ${styles[permissionStatus.value] || styles.default}`;
                });

                // Register service worker
                const registerSW = async () => {
                    try {
                        const registration = await navigator.serviceWorker.register('/sw.js');
                        await navigator.serviceWorker.ready;
                        return registration;
                    } catch (e) {
                        if (e.name === 'SecurityError' || e.message.includes('origin')) {
                            showPlaygroundWarning.value = true;
                        }
                        throw e;
                    }
                };

                // Schedule notification
                const scheduleNotification = async () => {
                    isProcessing.value = true;

                    try {
                        if (Notification.permission !== 'granted') {
                            await Notification.requestPermission();
                        }
                        updatePermissionStatus();

                        const registration = await registerSW();
                        const existingSub = await registration.pushManager.getSubscription();
                        if (existingSub) await existingSub.unsubscribe();

                        const subscription = await registration.pushManager.subscribe({
                            userVisibleOnly: true,
                            applicationServerKey: VAPID_PUBLIC_KEY
                        });

                        log('Subscribed. Processing...', 'info');

                        let scheduledTime = null;
                        if (delayMinutes.value) {
                            const minutes = parseFloat(delayMinutes.value);
                            if (!isNaN(minutes) && minutes > 0) {
                                scheduledTime = new Date(new Date().getTime() + minutes * 60000).toISOString();
                                log(`Delay: +${minutes}m`, 'info');
                            }
                        } else if (flatpickrInstance && flatpickrInstance.selectedDates.length > 0) {
                            scheduledTime = flatpickrInstance.selectedDates[0].toISOString();
                        }

                        const payload = {
                            sub: subscription,
                            message: message.value,
                            scheduled_time: scheduledTime
                        };

                        // Demo mode if not logged in
                        if (!user.value) {
                            payload.demo = true;
                        }

                        // Build URL with API key if user is logged in
                        let url = `${BACKEND_URL}/api/send`;
                        if (user.value && user.value.api_key) {
                            url += `?key=${encodeURIComponent(user.value.api_key)}`;
                        }

                        const response = await fetch(url, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) {
                            const errorText = await response.text();
                            throw new Error(errorText);
                        }

                        const resJson = await response.json();

                        if (resJson.scheduled) {
                            log(`ðŸ“… Scheduled: ${new Date(scheduledTime).toLocaleString()}`, 'warn');
                        } else {
                            log('ðŸš€ Sent Immediately!', 'success');
                        }

                    } catch (error) {
                        log(error.message, 'error');
                    } finally {
                        isProcessing.value = false;
                    }
                };

                // Dashboard functions
                const copyApiKey = () => {
                    if (!user.value) return;

                    const tempInput = document.createElement('textarea');
                    tempInput.value = user.value.api_key;
                    document.body.appendChild(tempInput);
                    tempInput.select();
                    document.execCommand('copy');
                    document.body.removeChild(tempInput);

                    showCopied.value = true;
                    setTimeout(() => {
                        showCopied.value = false;
                    }, 1500);
                };

                const loadNotifications = async () => {
                    if (!user.value) return;

                    loadingNotifications.value = true;
                    try {
                        // Build URL with API key
                        let url = `${BACKEND_URL}/api/notifications`;
                        if (user.value && user.value.api_key) {
                            url += `?key=${encodeURIComponent(user.value.api_key)}`;
                        }

                        const res = await fetch(url, {});

                        if (!res.ok) throw new Error('Failed to load notifications');

                        const data = await res.json();
                        if (!data.success) throw new Error(data.error || 'Unknown error');

                        notifications.value = data.notifications;
                    } catch (error) {
                        console.error('Error loading notifications:', error);
                        log('Failed to load notifications: ' + error.message, 'error');
                    } finally {
                        loadingNotifications.value = false;
                    }
                };

                const formatDate = (dateString) => {
                    return new Date(dateString).toLocaleString();
                };

                const timeUntil = (dateString) => {
                    const sendAt = new Date(dateString);
                    const now = new Date();
                    const timeUntilMinutes = Math.round((sendAt - now) / 1000 / 60);

                    if (timeUntilMinutes < 60) {
                        return `in ${timeUntilMinutes} min`;
                    } else if (timeUntilMinutes < 1440) {
                        const hours = Math.round(timeUntilMinutes / 60);
                        return `in ${hours} hour${hours > 1 ? 's' : ''}`;
                    } else {
                        const days = Math.round(timeUntilMinutes / 1440);
                        return `in ${days} day${days > 1 ? 's' : ''}`;
                    }
                };

                // Watch for path changes to load dashboard data
                watch(currentPath, (newPath) => {
                    if (newPath === '#/dashboard' && user.value) {
                        nextTick(() => {
                            loadNotifications();
                        });
                    }
                });

                // Watch delayMinutes to clear flatpickr
                watch(delayMinutes, (newVal) => {
                    if (newVal && flatpickrInstance && flatpickrInstance.selectedDates.length > 0) {
                        flatpickrInstance.clear();
                    }
                });

                onMounted(async () => {
                    await checkSession();
                    updatePermissionStatus();

                    // Initialize Flatpickr
                    nextTick(() => {
                        flatpickrInstance = flatpickr("#scheduleTime", {
                            enableTime: true,
                            dateFormat: "Y-m-d H:i",
                            altInput: true,
                            altFormat: "d.m.Y, H:i",
                            minDate: "today",
                            time_24hr: true,
                            theme: "dark",
                            disableMobile: "true",
                            onChange: function (selectedDates) {
                                if (selectedDates.length > 0) {
                                    delayMinutes.value = '';
                                }
                            }
                        });
                    });

                    // Load notifications if on dashboard
                    if (currentPath.value === '#/dashboard' && user.value) {
                        loadNotifications();
                    }
                });

                return {
                    user,
                    checkingSession,
                    currentPath,
                    loginUrl,
                    BACKEND_URL,
                    message,
                    delayMinutes,
                    logs,
                    isProcessing,
                    permissionStatusText,
                    permissionStatusClass,
                    showPlaygroundWarning,
                    showInstallButton,
                    notifications,
                    loadingNotifications,
                    showCopied,
                    logout,
                    clearLogs,
                    clearSchedule,
                    scheduleNotification,
                    installPWA,
                    copyApiKey,
                    loadNotifications,
                    formatDate,
                    timeUntil
                };
            }
        }).mount('#app');
    </script>

    <!-- Crisp Chat -->
    <script type="text/javascript">
        window.$crisp = [];
        window.CRISP_WEBSITE_ID = "bd841072-e99c-4dc5-b4dc-f78996435cb6";
        (function () {
            d = document;
            s = d.createElement("script");
            s.src = "https://client.crisp.chat/l.js";
            s.async = 1;
            d.getElementsByTagName("head")[0].appendChild(s);
        })();
    </script>
</body>

</html>